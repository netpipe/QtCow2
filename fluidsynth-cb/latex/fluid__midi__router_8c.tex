\hypertarget{fluid__midi__router_8c}{}\section{midi/fluid\+\_\+midi\+\_\+router.c File Reference}
\label{fluid__midi__router_8c}\index{midi/fluid\+\_\+midi\+\_\+router.\+c@{midi/fluid\+\_\+midi\+\_\+router.\+c}}
{\ttfamily \#include \char`\"{}fluid\+\_\+midi\+\_\+router.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}fluid\+\_\+midi.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}fluid\+\_\+synth.\+h\char`\"{}}\newline
Include dependency graph for fluid\+\_\+midi\+\_\+router.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{fluid__midi__router_8c__incl}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{struct__fluid__midi__router__t}{\+\_\+fluid\+\_\+midi\+\_\+router\+\_\+t}
\item 
struct \hyperlink{struct__fluid__midi__router__rule__t}{\+\_\+fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+t}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{types_8h_aa57b4746220e24506a169f109875e4ad}{fluid\+\_\+midi\+\_\+router\+\_\+t} $\ast$ \hyperlink{fluid__midi__router_8c_a11791201fd94c81226b2a7941634f615}{new\+\_\+fluid\+\_\+midi\+\_\+router} (\hyperlink{types_8h_aa363402d3c77333b0f070ba531d034ba}{fluid\+\_\+settings\+\_\+t} $\ast$settings, \hyperlink{midi_8h_a42c3752e3adb54e0af802131c36a1129}{handle\+\_\+midi\+\_\+event\+\_\+func\+\_\+t} handler, void $\ast$event\+\_\+handler\+\_\+data)
\item 
void \hyperlink{fluid__midi__router_8c_a4165894adbb6019ad6851138202c8389}{delete\+\_\+fluid\+\_\+midi\+\_\+router} (\hyperlink{types_8h_aa57b4746220e24506a169f109875e4ad}{fluid\+\_\+midi\+\_\+router\+\_\+t} $\ast$router)
\item 
int \hyperlink{fluid__midi__router_8c_a3a73e7a6bfb0f42451c57623181d5a2b}{fluid\+\_\+midi\+\_\+router\+\_\+set\+\_\+default\+\_\+rules} (\hyperlink{types_8h_aa57b4746220e24506a169f109875e4ad}{fluid\+\_\+midi\+\_\+router\+\_\+t} $\ast$router)
\item 
int \hyperlink{fluid__midi__router_8c_a21a8b9673c43955d4296a6ec1b3f0632}{fluid\+\_\+midi\+\_\+router\+\_\+clear\+\_\+rules} (\hyperlink{types_8h_aa57b4746220e24506a169f109875e4ad}{fluid\+\_\+midi\+\_\+router\+\_\+t} $\ast$router)
\item 
int \hyperlink{fluid__midi__router_8c_afa33ca65b0db6aaf16627c1972edaeb3}{fluid\+\_\+midi\+\_\+router\+\_\+add\+\_\+rule} (\hyperlink{types_8h_aa57b4746220e24506a169f109875e4ad}{fluid\+\_\+midi\+\_\+router\+\_\+t} $\ast$router, \hyperlink{types_8h_a3154253ddb8f9b8f8f737c91f5973278}{fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+t} $\ast$rule, int type)
\item 
\hyperlink{types_8h_a3154253ddb8f9b8f8f737c91f5973278}{fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+t} $\ast$ \hyperlink{fluid__midi__router_8c_a0e9d57b3665c4f4c18e9a03bd8b86f81}{new\+\_\+fluid\+\_\+midi\+\_\+router\+\_\+rule} (void)
\item 
void \hyperlink{fluid__midi__router_8c_ae96f28070c50ebc2da463a371c6642b1}{delete\+\_\+fluid\+\_\+midi\+\_\+router\+\_\+rule} (\hyperlink{types_8h_a3154253ddb8f9b8f8f737c91f5973278}{fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+t} $\ast$rule)
\item 
void \hyperlink{fluid__midi__router_8c_aca7ef04a4f0342acd40eaad0df8a5c62}{fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+set\+\_\+chan} (\hyperlink{types_8h_a3154253ddb8f9b8f8f737c91f5973278}{fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+t} $\ast$rule, int min, int max, float mul, int add)
\item 
void \hyperlink{fluid__midi__router_8c_ad3db6e0086719832d9a31dac5f6acd48}{fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+set\+\_\+param1} (\hyperlink{types_8h_a3154253ddb8f9b8f8f737c91f5973278}{fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+t} $\ast$rule, int min, int max, float mul, int add)
\item 
void \hyperlink{fluid__midi__router_8c_aa4f4eb8eaa0b15f90083ef8e45d79398}{fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+set\+\_\+param2} (\hyperlink{types_8h_a3154253ddb8f9b8f8f737c91f5973278}{fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+t} $\ast$rule, int min, int max, float mul, int add)
\item 
int \hyperlink{fluid__midi__router_8c_a6e80591df5910008c5bca21260b91c9c}{fluid\+\_\+midi\+\_\+router\+\_\+handle\+\_\+midi\+\_\+event} (void $\ast$data, \hyperlink{types_8h_a61c72b76e3ee344637994c3071f74d94}{fluid\+\_\+midi\+\_\+event\+\_\+t} $\ast$event)
\item 
int \hyperlink{fluid__midi__router_8c_aca3a687a87624f7782fea106b7039823}{fluid\+\_\+midi\+\_\+dump\+\_\+prerouter} (void $\ast$data, \hyperlink{types_8h_a61c72b76e3ee344637994c3071f74d94}{fluid\+\_\+midi\+\_\+event\+\_\+t} $\ast$event)
\item 
int \hyperlink{fluid__midi__router_8c_a5b3e8cb41fd0789ca8d99e7995df4182}{fluid\+\_\+midi\+\_\+dump\+\_\+postrouter} (void $\ast$data, \hyperlink{types_8h_a61c72b76e3ee344637994c3071f74d94}{fluid\+\_\+midi\+\_\+event\+\_\+t} $\ast$event)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\mbox{\Hypertarget{fluid__midi__router_8c_a4165894adbb6019ad6851138202c8389}\label{fluid__midi__router_8c_a4165894adbb6019ad6851138202c8389}} 
\index{fluid\+\_\+midi\+\_\+router.\+c@{fluid\+\_\+midi\+\_\+router.\+c}!delete\+\_\+fluid\+\_\+midi\+\_\+router@{delete\+\_\+fluid\+\_\+midi\+\_\+router}}
\index{delete\+\_\+fluid\+\_\+midi\+\_\+router@{delete\+\_\+fluid\+\_\+midi\+\_\+router}!fluid\+\_\+midi\+\_\+router.\+c@{fluid\+\_\+midi\+\_\+router.\+c}}
\subsubsection{\texorpdfstring{delete\+\_\+fluid\+\_\+midi\+\_\+router()}{delete\_fluid\_midi\_router()}}
{\footnotesize\ttfamily void delete\+\_\+fluid\+\_\+midi\+\_\+router (\begin{DoxyParamCaption}\item[{\hyperlink{types_8h_aa57b4746220e24506a169f109875e4ad}{fluid\+\_\+midi\+\_\+router\+\_\+t} $\ast$}]{router }\end{DoxyParamCaption})}

Delete a M\+I\+DI router instance. 
\begin{DoxyParams}{Parameters}
{\em router} & M\+I\+DI router to delete \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns \hyperlink{misc_8h_ae4efb1c3ce0d550c922504adfb0fb886}{F\+L\+U\+I\+D\+\_\+\+OK} on success, \hyperlink{misc_8h_a90e8bdbc5a507bbfa5c45bac85a63a61}{F\+L\+U\+I\+D\+\_\+\+F\+A\+I\+L\+ED} otherwise (only if N\+U\+LL {\itshape router} passed really) 
\end{DoxyReturn}
\mbox{\Hypertarget{fluid__midi__router_8c_ae96f28070c50ebc2da463a371c6642b1}\label{fluid__midi__router_8c_ae96f28070c50ebc2da463a371c6642b1}} 
\index{fluid\+\_\+midi\+\_\+router.\+c@{fluid\+\_\+midi\+\_\+router.\+c}!delete\+\_\+fluid\+\_\+midi\+\_\+router\+\_\+rule@{delete\+\_\+fluid\+\_\+midi\+\_\+router\+\_\+rule}}
\index{delete\+\_\+fluid\+\_\+midi\+\_\+router\+\_\+rule@{delete\+\_\+fluid\+\_\+midi\+\_\+router\+\_\+rule}!fluid\+\_\+midi\+\_\+router.\+c@{fluid\+\_\+midi\+\_\+router.\+c}}
\subsubsection{\texorpdfstring{delete\+\_\+fluid\+\_\+midi\+\_\+router\+\_\+rule()}{delete\_fluid\_midi\_router\_rule()}}
{\footnotesize\ttfamily void delete\+\_\+fluid\+\_\+midi\+\_\+router\+\_\+rule (\begin{DoxyParamCaption}\item[{\hyperlink{types_8h_a3154253ddb8f9b8f8f737c91f5973278}{fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+t} $\ast$}]{rule }\end{DoxyParamCaption})}

Free a M\+I\+DI router rule. 
\begin{DoxyParams}{Parameters}
{\em rule} & Router rule to free \\
\hline
\end{DoxyParams}
\begin{DoxySince}{Since}
1.\+1.\+0
\end{DoxySince}
Note that rules which have been added to a router are managed by the router, so this function should seldom be needed. \mbox{\Hypertarget{fluid__midi__router_8c_a5b3e8cb41fd0789ca8d99e7995df4182}\label{fluid__midi__router_8c_a5b3e8cb41fd0789ca8d99e7995df4182}} 
\index{fluid\+\_\+midi\+\_\+router.\+c@{fluid\+\_\+midi\+\_\+router.\+c}!fluid\+\_\+midi\+\_\+dump\+\_\+postrouter@{fluid\+\_\+midi\+\_\+dump\+\_\+postrouter}}
\index{fluid\+\_\+midi\+\_\+dump\+\_\+postrouter@{fluid\+\_\+midi\+\_\+dump\+\_\+postrouter}!fluid\+\_\+midi\+\_\+router.\+c@{fluid\+\_\+midi\+\_\+router.\+c}}
\subsubsection{\texorpdfstring{fluid\+\_\+midi\+\_\+dump\+\_\+postrouter()}{fluid\_midi\_dump\_postrouter()}}
{\footnotesize\ttfamily int fluid\+\_\+midi\+\_\+dump\+\_\+postrouter (\begin{DoxyParamCaption}\item[{void $\ast$}]{data,  }\item[{\hyperlink{types_8h_a61c72b76e3ee344637994c3071f74d94}{fluid\+\_\+midi\+\_\+event\+\_\+t} $\ast$}]{event }\end{DoxyParamCaption})}

M\+I\+DI event callback function to display event information to stdout 
\begin{DoxyParams}{Parameters}
{\em data} & M\+I\+DI router instance \\
\hline
{\em event} & M\+I\+DI event data \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{misc_8h_ae4efb1c3ce0d550c922504adfb0fb886}{F\+L\+U\+I\+D\+\_\+\+OK} on success, \hyperlink{misc_8h_a90e8bdbc5a507bbfa5c45bac85a63a61}{F\+L\+U\+I\+D\+\_\+\+F\+A\+I\+L\+ED} otherwise
\end{DoxyReturn}
An implementation of the \hyperlink{midi_8h_a42c3752e3adb54e0af802131c36a1129}{handle\+\_\+midi\+\_\+event\+\_\+func\+\_\+t} function type, used for displaying M\+I\+DI event information between the M\+I\+DI driver and router to stdout. Useful for adding into a M\+I\+DI router chain for debugging M\+I\+DI events. \mbox{\Hypertarget{fluid__midi__router_8c_aca3a687a87624f7782fea106b7039823}\label{fluid__midi__router_8c_aca3a687a87624f7782fea106b7039823}} 
\index{fluid\+\_\+midi\+\_\+router.\+c@{fluid\+\_\+midi\+\_\+router.\+c}!fluid\+\_\+midi\+\_\+dump\+\_\+prerouter@{fluid\+\_\+midi\+\_\+dump\+\_\+prerouter}}
\index{fluid\+\_\+midi\+\_\+dump\+\_\+prerouter@{fluid\+\_\+midi\+\_\+dump\+\_\+prerouter}!fluid\+\_\+midi\+\_\+router.\+c@{fluid\+\_\+midi\+\_\+router.\+c}}
\subsubsection{\texorpdfstring{fluid\+\_\+midi\+\_\+dump\+\_\+prerouter()}{fluid\_midi\_dump\_prerouter()}}
{\footnotesize\ttfamily int fluid\+\_\+midi\+\_\+dump\+\_\+prerouter (\begin{DoxyParamCaption}\item[{void $\ast$}]{data,  }\item[{\hyperlink{types_8h_a61c72b76e3ee344637994c3071f74d94}{fluid\+\_\+midi\+\_\+event\+\_\+t} $\ast$}]{event }\end{DoxyParamCaption})}

M\+I\+DI event callback function to display event information to stdout 
\begin{DoxyParams}{Parameters}
{\em data} & M\+I\+DI router instance \\
\hline
{\em event} & M\+I\+DI event data \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{misc_8h_ae4efb1c3ce0d550c922504adfb0fb886}{F\+L\+U\+I\+D\+\_\+\+OK} on success, \hyperlink{misc_8h_a90e8bdbc5a507bbfa5c45bac85a63a61}{F\+L\+U\+I\+D\+\_\+\+F\+A\+I\+L\+ED} otherwise
\end{DoxyReturn}
An implementation of the \hyperlink{midi_8h_a42c3752e3adb54e0af802131c36a1129}{handle\+\_\+midi\+\_\+event\+\_\+func\+\_\+t} function type, used for displaying M\+I\+DI event information between the M\+I\+DI driver and router to stdout. Useful for adding into a M\+I\+DI router chain for debugging M\+I\+DI events. \mbox{\Hypertarget{fluid__midi__router_8c_afa33ca65b0db6aaf16627c1972edaeb3}\label{fluid__midi__router_8c_afa33ca65b0db6aaf16627c1972edaeb3}} 
\index{fluid\+\_\+midi\+\_\+router.\+c@{fluid\+\_\+midi\+\_\+router.\+c}!fluid\+\_\+midi\+\_\+router\+\_\+add\+\_\+rule@{fluid\+\_\+midi\+\_\+router\+\_\+add\+\_\+rule}}
\index{fluid\+\_\+midi\+\_\+router\+\_\+add\+\_\+rule@{fluid\+\_\+midi\+\_\+router\+\_\+add\+\_\+rule}!fluid\+\_\+midi\+\_\+router.\+c@{fluid\+\_\+midi\+\_\+router.\+c}}
\subsubsection{\texorpdfstring{fluid\+\_\+midi\+\_\+router\+\_\+add\+\_\+rule()}{fluid\_midi\_router\_add\_rule()}}
{\footnotesize\ttfamily int fluid\+\_\+midi\+\_\+router\+\_\+add\+\_\+rule (\begin{DoxyParamCaption}\item[{\hyperlink{types_8h_aa57b4746220e24506a169f109875e4ad}{fluid\+\_\+midi\+\_\+router\+\_\+t} $\ast$}]{router,  }\item[{\hyperlink{types_8h_a3154253ddb8f9b8f8f737c91f5973278}{fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+t} $\ast$}]{rule,  }\item[{int}]{type }\end{DoxyParamCaption})}

Add a rule to a M\+I\+DI router. 
\begin{DoxyParams}{Parameters}
{\em router} & M\+I\+DI router \\
\hline
{\em rule} & Rule to add (used directly and should not be accessed again following a successful call to this function). \\
\hline
{\em type} & The type of rule to add (\hyperlink{midi_8h_ab798a0a5b95607556c9ecfbeaaab962b}{fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+type}) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{misc_8h_ae4efb1c3ce0d550c922504adfb0fb886}{F\+L\+U\+I\+D\+\_\+\+OK} on success, \hyperlink{misc_8h_a90e8bdbc5a507bbfa5c45bac85a63a61}{F\+L\+U\+I\+D\+\_\+\+F\+A\+I\+L\+ED} otherwise (invalid rule for example) 
\end{DoxyReturn}
\begin{DoxySince}{Since}
1.\+1.\+0 
\end{DoxySince}
\mbox{\Hypertarget{fluid__midi__router_8c_a21a8b9673c43955d4296a6ec1b3f0632}\label{fluid__midi__router_8c_a21a8b9673c43955d4296a6ec1b3f0632}} 
\index{fluid\+\_\+midi\+\_\+router.\+c@{fluid\+\_\+midi\+\_\+router.\+c}!fluid\+\_\+midi\+\_\+router\+\_\+clear\+\_\+rules@{fluid\+\_\+midi\+\_\+router\+\_\+clear\+\_\+rules}}
\index{fluid\+\_\+midi\+\_\+router\+\_\+clear\+\_\+rules@{fluid\+\_\+midi\+\_\+router\+\_\+clear\+\_\+rules}!fluid\+\_\+midi\+\_\+router.\+c@{fluid\+\_\+midi\+\_\+router.\+c}}
\subsubsection{\texorpdfstring{fluid\+\_\+midi\+\_\+router\+\_\+clear\+\_\+rules()}{fluid\_midi\_router\_clear\_rules()}}
{\footnotesize\ttfamily int fluid\+\_\+midi\+\_\+router\+\_\+clear\+\_\+rules (\begin{DoxyParamCaption}\item[{\hyperlink{types_8h_aa57b4746220e24506a169f109875e4ad}{fluid\+\_\+midi\+\_\+router\+\_\+t} $\ast$}]{router }\end{DoxyParamCaption})}

Clear all rules in a M\+I\+DI router. Such a router will drop all events until rules are added. 
\begin{DoxyParams}{Parameters}
{\em router} & Router to clear all rules from \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{misc_8h_ae4efb1c3ce0d550c922504adfb0fb886}{F\+L\+U\+I\+D\+\_\+\+OK} on success, \hyperlink{misc_8h_a90e8bdbc5a507bbfa5c45bac85a63a61}{F\+L\+U\+I\+D\+\_\+\+F\+A\+I\+L\+ED} otherwise 
\end{DoxyReturn}
\begin{DoxySince}{Since}
1.\+1.\+0 
\end{DoxySince}
\mbox{\Hypertarget{fluid__midi__router_8c_a6e80591df5910008c5bca21260b91c9c}\label{fluid__midi__router_8c_a6e80591df5910008c5bca21260b91c9c}} 
\index{fluid\+\_\+midi\+\_\+router.\+c@{fluid\+\_\+midi\+\_\+router.\+c}!fluid\+\_\+midi\+\_\+router\+\_\+handle\+\_\+midi\+\_\+event@{fluid\+\_\+midi\+\_\+router\+\_\+handle\+\_\+midi\+\_\+event}}
\index{fluid\+\_\+midi\+\_\+router\+\_\+handle\+\_\+midi\+\_\+event@{fluid\+\_\+midi\+\_\+router\+\_\+handle\+\_\+midi\+\_\+event}!fluid\+\_\+midi\+\_\+router.\+c@{fluid\+\_\+midi\+\_\+router.\+c}}
\subsubsection{\texorpdfstring{fluid\+\_\+midi\+\_\+router\+\_\+handle\+\_\+midi\+\_\+event()}{fluid\_midi\_router\_handle\_midi\_event()}}
{\footnotesize\ttfamily int fluid\+\_\+midi\+\_\+router\+\_\+handle\+\_\+midi\+\_\+event (\begin{DoxyParamCaption}\item[{void $\ast$}]{data,  }\item[{\hyperlink{types_8h_a61c72b76e3ee344637994c3071f74d94}{fluid\+\_\+midi\+\_\+event\+\_\+t} $\ast$}]{event }\end{DoxyParamCaption})}

Handle a M\+I\+DI event through a M\+I\+DI router instance. 
\begin{DoxyParams}{Parameters}
{\em data} & M\+I\+DI router instance \hyperlink{types_8h_aa57b4746220e24506a169f109875e4ad}{fluid\+\_\+midi\+\_\+router\+\_\+t}, its a void $\ast$ so that this function can be used as a callback for other subsystems (\hyperlink{fluid__mdriver_8c_a367ff3729be7eb4b3d1669cbfebc4b2d}{new\+\_\+fluid\+\_\+midi\+\_\+driver()} for example). \\
\hline
{\em event} & M\+I\+DI event to handle \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{misc_8h_ae4efb1c3ce0d550c922504adfb0fb886}{F\+L\+U\+I\+D\+\_\+\+OK} on success, \hyperlink{misc_8h_a90e8bdbc5a507bbfa5c45bac85a63a61}{F\+L\+U\+I\+D\+\_\+\+F\+A\+I\+L\+ED} otherwise
\end{DoxyReturn}
Purpose\+: The midi router is called for each event, that is received via the \textquotesingle{}physical\textquotesingle{} midi input. Each event can trigger an arbitrary number of generated events (one for each rule that matches).

In default mode, a noteon event is just forwarded to the synth\textquotesingle{}s \textquotesingle{}noteon\textquotesingle{} function, a \textquotesingle{}CC\textquotesingle{} event to the synth\textquotesingle{}s \textquotesingle{}CC\textquotesingle{} function and so on.

The router can be used to\+:
\begin{DoxyItemize}
\item filter messages (for example\+: Pass sustain pedal C\+Cs only to selected channels)
\item split the keyboard (noteon with notenr $<$ x\+: to ch 1, $>$x to ch 2)
\item layer sounds (for each noteon received on ch 1, create a noteon on ch1, ch2, ch3,...)
\item velocity scaling (for each noteon event, scale the velocity by 1.\+27 to give D\+X7 users a chance)
\item velocity switching (\char`\"{}v $<$=100\+: Angel Choir; V $>$ 100\+: Hell\textquotesingle{}s Bells\char`\"{})
\item get rid of aftertouch
\item ... 
\end{DoxyItemize}\mbox{\Hypertarget{fluid__midi__router_8c_aca7ef04a4f0342acd40eaad0df8a5c62}\label{fluid__midi__router_8c_aca7ef04a4f0342acd40eaad0df8a5c62}} 
\index{fluid\+\_\+midi\+\_\+router.\+c@{fluid\+\_\+midi\+\_\+router.\+c}!fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+set\+\_\+chan@{fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+set\+\_\+chan}}
\index{fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+set\+\_\+chan@{fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+set\+\_\+chan}!fluid\+\_\+midi\+\_\+router.\+c@{fluid\+\_\+midi\+\_\+router.\+c}}
\subsubsection{\texorpdfstring{fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+set\+\_\+chan()}{fluid\_midi\_router\_rule\_set\_chan()}}
{\footnotesize\ttfamily void fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+set\+\_\+chan (\begin{DoxyParamCaption}\item[{\hyperlink{types_8h_a3154253ddb8f9b8f8f737c91f5973278}{fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+t} $\ast$}]{rule,  }\item[{int}]{min,  }\item[{int}]{max,  }\item[{float}]{mul,  }\item[{int}]{add }\end{DoxyParamCaption})}

Set the channel portion of a rule. 
\begin{DoxyParams}{Parameters}
{\em rule} & M\+I\+DI router rule \\
\hline
{\em min} & Minimum value for rule match \\
\hline
{\em max} & Maximum value for rule match \\
\hline
{\em mul} & Value which is multiplied by matching event\textquotesingle{}s channel value (1.\+0 to not modify) \\
\hline
{\em add} & Value which is added to matching event\textquotesingle{}s channel value (0 to not modify) \\
\hline
\end{DoxyParams}
\begin{DoxySince}{Since}
1.\+1.\+0
\end{DoxySince}
The {\itshape min} and {\itshape max} parameters define a channel range window to match incoming events to. If {\itshape min} is less than or equal to {\itshape max} then an event is matched if its channel is within the defined range (including {\itshape min} and {\itshape max}). If {\itshape min} is greater than {\itshape max} then rule is inverted and matches everything except in {\itshape between} the defined range (so {\itshape min} and {\itshape max} would match).

The {\itshape mul} and {\itshape add} values are used to modify event channel values prior to sending the event, if the rule matches. \mbox{\Hypertarget{fluid__midi__router_8c_ad3db6e0086719832d9a31dac5f6acd48}\label{fluid__midi__router_8c_ad3db6e0086719832d9a31dac5f6acd48}} 
\index{fluid\+\_\+midi\+\_\+router.\+c@{fluid\+\_\+midi\+\_\+router.\+c}!fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+set\+\_\+param1@{fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+set\+\_\+param1}}
\index{fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+set\+\_\+param1@{fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+set\+\_\+param1}!fluid\+\_\+midi\+\_\+router.\+c@{fluid\+\_\+midi\+\_\+router.\+c}}
\subsubsection{\texorpdfstring{fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+set\+\_\+param1()}{fluid\_midi\_router\_rule\_set\_param1()}}
{\footnotesize\ttfamily void fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+set\+\_\+param1 (\begin{DoxyParamCaption}\item[{\hyperlink{types_8h_a3154253ddb8f9b8f8f737c91f5973278}{fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+t} $\ast$}]{rule,  }\item[{int}]{min,  }\item[{int}]{max,  }\item[{float}]{mul,  }\item[{int}]{add }\end{DoxyParamCaption})}

Set the first parameter portion of a rule. 
\begin{DoxyParams}{Parameters}
{\em rule} & M\+I\+DI router rule \\
\hline
{\em min} & Minimum value for rule match \\
\hline
{\em max} & Maximum value for rule match \\
\hline
{\em mul} & Value which is multiplied by matching event\textquotesingle{}s 1st parameter value (1.\+0 to not modify) \\
\hline
{\em add} & Value which is added to matching event\textquotesingle{}s 1st parameter value (0 to not modify) \\
\hline
\end{DoxyParams}
\begin{DoxySince}{Since}
1.\+1.\+0
\end{DoxySince}
The 1st parameter of an event depends on the type of event. For note events its the M\+I\+DI note \#, for CC events its the M\+I\+DI control number, for program change events its the M\+I\+DI program \#, for pitch bend events its the bend value, for channel pressure its the channel pressure value and for key pressure its the M\+I\+DI note number.

Pitch bend values have a maximum value of 16383 (8192 is pitch bend center) and all other events have a max of 127. All events have a minimum value of 0.

The {\itshape min} and {\itshape max} parameters define a parameter range window to match incoming events to. If {\itshape min} is less than or equal to {\itshape max} then an event is matched if its 1st parameter is within the defined range (including {\itshape min} and {\itshape max}). If {\itshape min} is greater than {\itshape max} then rule is inverted and matches everything except in {\itshape between} the defined range (so {\itshape min} and {\itshape max} would match).

The {\itshape mul} and {\itshape add} values are used to modify event 1st parameter values prior to sending the event, if the rule matches. \mbox{\Hypertarget{fluid__midi__router_8c_aa4f4eb8eaa0b15f90083ef8e45d79398}\label{fluid__midi__router_8c_aa4f4eb8eaa0b15f90083ef8e45d79398}} 
\index{fluid\+\_\+midi\+\_\+router.\+c@{fluid\+\_\+midi\+\_\+router.\+c}!fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+set\+\_\+param2@{fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+set\+\_\+param2}}
\index{fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+set\+\_\+param2@{fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+set\+\_\+param2}!fluid\+\_\+midi\+\_\+router.\+c@{fluid\+\_\+midi\+\_\+router.\+c}}
\subsubsection{\texorpdfstring{fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+set\+\_\+param2()}{fluid\_midi\_router\_rule\_set\_param2()}}
{\footnotesize\ttfamily void fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+set\+\_\+param2 (\begin{DoxyParamCaption}\item[{\hyperlink{types_8h_a3154253ddb8f9b8f8f737c91f5973278}{fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+t} $\ast$}]{rule,  }\item[{int}]{min,  }\item[{int}]{max,  }\item[{float}]{mul,  }\item[{int}]{add }\end{DoxyParamCaption})}

Set the second parameter portion of a rule. 
\begin{DoxyParams}{Parameters}
{\em rule} & M\+I\+DI router rule \\
\hline
{\em min} & Minimum value for rule match \\
\hline
{\em max} & Maximum value for rule match \\
\hline
{\em mul} & Value which is multiplied by matching event\textquotesingle{}s 2nd parameter value (1.\+0 to not modify) \\
\hline
{\em add} & Value which is added to matching event\textquotesingle{}s 2nd parameter value (0 to not modify) \\
\hline
\end{DoxyParams}
\begin{DoxySince}{Since}
1.\+1.\+0
\end{DoxySince}
The 2nd parameter of an event depends on the type of event. For note events its the M\+I\+DI velocity, for CC events its the control value and for key pressure events its the key pressure value. All other types lack a 2nd parameter.

All applicable 2nd parameters have the range 0-\/127.

The {\itshape min} and {\itshape max} parameters define a parameter range window to match incoming events to. If {\itshape min} is less than or equal to {\itshape max} then an event is matched if its 2nd parameter is within the defined range (including {\itshape min} and {\itshape max}). If {\itshape min} is greater than {\itshape max} then rule is inverted and matches everything except in {\itshape between} the defined range (so {\itshape min} and {\itshape max} would match).

The {\itshape mul} and {\itshape add} values are used to modify event 2nd parameter values prior to sending the event, if the rule matches. \mbox{\Hypertarget{fluid__midi__router_8c_a3a73e7a6bfb0f42451c57623181d5a2b}\label{fluid__midi__router_8c_a3a73e7a6bfb0f42451c57623181d5a2b}} 
\index{fluid\+\_\+midi\+\_\+router.\+c@{fluid\+\_\+midi\+\_\+router.\+c}!fluid\+\_\+midi\+\_\+router\+\_\+set\+\_\+default\+\_\+rules@{fluid\+\_\+midi\+\_\+router\+\_\+set\+\_\+default\+\_\+rules}}
\index{fluid\+\_\+midi\+\_\+router\+\_\+set\+\_\+default\+\_\+rules@{fluid\+\_\+midi\+\_\+router\+\_\+set\+\_\+default\+\_\+rules}!fluid\+\_\+midi\+\_\+router.\+c@{fluid\+\_\+midi\+\_\+router.\+c}}
\subsubsection{\texorpdfstring{fluid\+\_\+midi\+\_\+router\+\_\+set\+\_\+default\+\_\+rules()}{fluid\_midi\_router\_set\_default\_rules()}}
{\footnotesize\ttfamily int fluid\+\_\+midi\+\_\+router\+\_\+set\+\_\+default\+\_\+rules (\begin{DoxyParamCaption}\item[{\hyperlink{types_8h_aa57b4746220e24506a169f109875e4ad}{fluid\+\_\+midi\+\_\+router\+\_\+t} $\ast$}]{router }\end{DoxyParamCaption})}

Set a M\+I\+DI router to use default \char`\"{}unity\char`\"{} rules. Such a router will pass all events unmodified. 
\begin{DoxyParams}{Parameters}
{\em router} & Router to set to default rules. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{misc_8h_ae4efb1c3ce0d550c922504adfb0fb886}{F\+L\+U\+I\+D\+\_\+\+OK} on success, \hyperlink{misc_8h_a90e8bdbc5a507bbfa5c45bac85a63a61}{F\+L\+U\+I\+D\+\_\+\+F\+A\+I\+L\+ED} otherwise 
\end{DoxyReturn}
\begin{DoxySince}{Since}
1.\+1.\+0 
\end{DoxySince}
\mbox{\Hypertarget{fluid__midi__router_8c_a11791201fd94c81226b2a7941634f615}\label{fluid__midi__router_8c_a11791201fd94c81226b2a7941634f615}} 
\index{fluid\+\_\+midi\+\_\+router.\+c@{fluid\+\_\+midi\+\_\+router.\+c}!new\+\_\+fluid\+\_\+midi\+\_\+router@{new\+\_\+fluid\+\_\+midi\+\_\+router}}
\index{new\+\_\+fluid\+\_\+midi\+\_\+router@{new\+\_\+fluid\+\_\+midi\+\_\+router}!fluid\+\_\+midi\+\_\+router.\+c@{fluid\+\_\+midi\+\_\+router.\+c}}
\subsubsection{\texorpdfstring{new\+\_\+fluid\+\_\+midi\+\_\+router()}{new\_fluid\_midi\_router()}}
{\footnotesize\ttfamily \hyperlink{types_8h_aa57b4746220e24506a169f109875e4ad}{fluid\+\_\+midi\+\_\+router\+\_\+t}$\ast$ new\+\_\+fluid\+\_\+midi\+\_\+router (\begin{DoxyParamCaption}\item[{\hyperlink{types_8h_aa363402d3c77333b0f070ba531d034ba}{fluid\+\_\+settings\+\_\+t} $\ast$}]{settings,  }\item[{\hyperlink{midi_8h_a42c3752e3adb54e0af802131c36a1129}{handle\+\_\+midi\+\_\+event\+\_\+func\+\_\+t}}]{handler,  }\item[{void $\ast$}]{event\+\_\+handler\+\_\+data }\end{DoxyParamCaption})}

Create a new midi router. The default rules will pass all events unmodified. 
\begin{DoxyParams}{Parameters}
{\em settings} & Settings used to configure M\+I\+DI router \\
\hline
{\em handler} & M\+I\+DI event callback. \\
\hline
{\em event\+\_\+handler\+\_\+data} & Caller defined data pointer which gets passed to \textquotesingle{}handler\textquotesingle{} \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
New M\+I\+DI router instance or N\+U\+LL on error
\end{DoxyReturn}
The M\+I\+DI handler callback should process the possibly filtered/modified M\+I\+DI events from the M\+I\+DI router and forward them on to a synthesizer for example. The function \hyperlink{synth_8h_a439e1175fa34123b3d0c96a0366d42dd}{fluid\+\_\+synth\+\_\+handle\+\_\+midi\+\_\+event()} can be used for {\itshape handle} and a \hyperlink{types_8h_ae265f10ae174a13afe010de50d87e1a4}{fluid\+\_\+synth\+\_\+t} passed as the {\itshape event\+\_\+handler\+\_\+data} parameter for this purpose. \mbox{\Hypertarget{fluid__midi__router_8c_a0e9d57b3665c4f4c18e9a03bd8b86f81}\label{fluid__midi__router_8c_a0e9d57b3665c4f4c18e9a03bd8b86f81}} 
\index{fluid\+\_\+midi\+\_\+router.\+c@{fluid\+\_\+midi\+\_\+router.\+c}!new\+\_\+fluid\+\_\+midi\+\_\+router\+\_\+rule@{new\+\_\+fluid\+\_\+midi\+\_\+router\+\_\+rule}}
\index{new\+\_\+fluid\+\_\+midi\+\_\+router\+\_\+rule@{new\+\_\+fluid\+\_\+midi\+\_\+router\+\_\+rule}!fluid\+\_\+midi\+\_\+router.\+c@{fluid\+\_\+midi\+\_\+router.\+c}}
\subsubsection{\texorpdfstring{new\+\_\+fluid\+\_\+midi\+\_\+router\+\_\+rule()}{new\_fluid\_midi\_router\_rule()}}
{\footnotesize\ttfamily \hyperlink{types_8h_a3154253ddb8f9b8f8f737c91f5973278}{fluid\+\_\+midi\+\_\+router\+\_\+rule\+\_\+t}$\ast$ new\+\_\+fluid\+\_\+midi\+\_\+router\+\_\+rule (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

Create a new M\+I\+DI router rule. \begin{DoxyReturn}{Returns}
Newly allocated router rule or N\+U\+LL if out of memory. 
\end{DoxyReturn}
\begin{DoxySince}{Since}
1.\+1.\+0
\end{DoxySince}
The new rule is a \char`\"{}unity\char`\"{} rule which will accept any values and wont modify them. 