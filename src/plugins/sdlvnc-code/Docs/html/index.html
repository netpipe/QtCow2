<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>SDL_vnc: SDL_vnc - SDL VNC Client library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li class="current"><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>SDL_vnc - SDL VNC Client library </h1><h3 class="version">1.0.2 </h3><h2><a class="anchor" id="intro_sec">
Introduction</a></h2>
<p>The SDL_vnc library was created to offer a VNC client system that:</p>
<ul>
<li>is LGPL licensed and can be used in commercial applications</li>
<li>integrates with SDL (framebuffer is a SDL surface)</li>
<li>IO and processing runs as a thread, so it does not interfere with a traditional "game loop"</li>
</ul>
<p>The current components of the SDL_vnc library are:</p>
<ul>
<li>the VNC library (<a class="el" href="_s_d_l__vnc_8h.html">SDL_vnc.h</a>, <a class="el" href="_s_d_l__vnc_8c.html">SDL_vnc.c</a>)</li>
<li>various helpers (<a class="el" href="d3des_8c.html">d3des.c</a>, <a class="el" href="d3des_8h.html">d3des.h</a>, <a class="el" href="inet__pton_8c.html">inet_pton.c</a>, <a class="el" href="charhexout_8h.html">charhexout.h</a>)</li>
</ul>
<p>Email aschiffler at ferzkopp.net to contact the author or better check author's homepage at <a href="http://www.ferzkopp.net">http://www.ferzkopp.net</a> for the most up-to-date contact information.</p>
<p>This library is licenced under the LGPL, see the file LICENSE for details.</p>
<p>LGPL (c) A. Schiffler</p>
<h2><a class="anchor" id="platforms_sec">
Supported Platforms</a></h2>
<p>The library compiles and is tested on a Linux target with a TightVNC server running on windows. Visual studio solutions for Win32 (and Win64) builds are provided.</p>
<h2><a class="anchor" id="install_sec">
Installation and Test</a></h2>
<p>To compile the library your need the SDL 1.2 installed from source or installed with the 'devel' RPM package. For example on Mandrake, run: urpmi libSDL1.2-devel</p>
<p>Then run </p>
<div class="fragment"><pre class="fragment">
	./autogen.sh	(optional)
	./configure
	make
	make install
	ldconfig
</pre></div><p>to compile and install the library. The default location for the installation is /usr/local/lib and /usr/local/include. The libary path /usr/local/lib might need to be added to the file /etc/ld.so.conf then run ldconfig again.</p>
<h3><a class="anchor" id="api_sec">
API and Usage</a></h3>
<div class="fragment"><pre class="fragment">
int vncConnect(tSDL_vnc *vnc, char *host, int port, char *mode, char *password, int framerate);

  Connect to VNC server 

  Parameters
   vnc  = pointer to tSDL_vnc structure
   host = hostname or hostip
   port = port
   mode = submode,submode,...
    submode =	raw | 
    		copyrect | 
    		rre | 
    		corre(broken) |
    		hextile | 
    		zrle(unimplemented) | 
    		cursor | 
    		desktop(unimplemented)
   password = text
   framerate = 1 to 100

  Notes;
   - Returns 1 if connection was established, 0 otherwise.
   - This call will establish a connection to the VNC server requesting a 32bit transfer.
   - framerate is the rate in which update requests are send to the server.


 
int vncBlitFramebuffer(tSDL_vnc *vnc, SDL_Surface *target, SDL_Rect *urec);

 Blit current framebuffer to target

 Parameters
  vnc = pointer to tSDL_vnc structure
  target = target surface to blit framebuffer to
  urec = pointer to SDL_Rect structure to receive updated area, can be NULL

  Notes:
   - Returns 1 if the blit occured, 0 otherwise.
   - Only blits if framebuffer exists and was updated. 
   - Updated region is stored in urec if it is not NULL.
   - Framebuffer is a RGB surface.


 
int vncBlitCursor(tSDL_vnc *vnc, SDL_Surface *target, SDL_Rect *trec);

  Blit current cursor to target

  Parameters
   vnc = pointer to tSDL_vnc structure
   target = target surface to blit cursoe to
   trec = pointer to SDL_Rect structure to receive updated area, can be NULL
 
  Notes
   - Returns 1 if blit occured, 0 otherwise 
   - Blitting is at the trec position.
   - Cursor image is a 32x32 RGBA image (with A set).




SDL_Rect vncCursorHotspot(tSDL_vnc *vnc);



  Parameters
   vnc = pointer to tSDL_vnc structure

  Notes: 
   - In the returned parameter, only .x and .y are used.



int vncClientKeyevent(tSDL_vnc *vnc, unsigned char downflag, unsigned int key);
int vncClientPointerevent(tSDL_vnc *vnc, unsigned char buttonmask, unsigned short x, unsigned short y);

  Send keyboard and pointer events to server

  Parameters
   vnc = pointer to tSDL_vnc structure
   downflag = 1 for key is down, 0 for key is up
   key = VNC keycode (basically X11/keysymdef.h plus some special codes)
   buttonmask = VNC mousebutton bitmask 1=left, 2-=middle, 4=right, 8/16=wheel
   x,y = mouse position

  Notes:
   - The client is responsible for key-code conversions into the VNC format.



void vncDisconnect(tSDL_vnc *vnc);

  Disconnect from vnc server

  Parameters
   vnc = pointer to tSDL_vnc structure

  Notes:
   - Closes socket connection and kills client thread. 
</pre></div><h3><a class="anchor" id="tests">
Test Program</a></h3>
<p>Change to the ./Test directory and run </p>
<div class="fragment"><pre class="fragment">
	./configure
	make
</pre></div><p> to creates a VNC client program. Run </p>
<div class="fragment"><pre class="fragment">
	./TestVNC -help
</pre></div><p>Typically one connects to a VNC server like this: </p>
<div class="fragment"><pre class="fragment">
	./TestVNC -server myserver -password mypass
</pre></div><p>Also see the source code TestVNC.c for sample code on how to create a simple VNC client.</p>
<h2><a class="anchor" id="dev_sec">
Development and To-Do</a></h2>
<p>One can edit the <a class="el" href="_s_d_l__vnc_8c.html">SDL_vnc.c</a> code to enable extensive debugging by setting the DEBUG flag.</p>
<p>TODO:</p>
<ul>
<li>Add function to query server framebuffer size after connect.</li>
<li>Fix CoRRE code</li>
<li>Implement Desktop pseudoencoding</li>
<li>Implement Bell (as callback)</li>
<li>Implement ClientCutText</li>
<li>Implement ZRLE protocol</li>
<li>Implement tight protocol and options (zlib,tight,zlibhex) (Anyone have the specs for this?)</li>
<li>Improved speed and interactive response (Implement a threaded socket reader. Check all code for optimizations.) ('vncviewer' feels a lot faster and more interactive.)</li>
<li>Create proper SDL_keysym --&gt; VNC key conversion routine.</li>
<li>Add local-cursor sample code to TestVNC program.</li>
</ul>
<h2><a class="anchor" id="contributors_sec">
Contributors</a></h2>
<ul>
<li>Thanks to 'AppWares Development Group' for supporting this project.</li>
<li>HotKey - hotkey_muc at users.sourceforge.net</li>
</ul>
<p>For access to the repository, please ask to be added as developer to the sourceforge project here: <a href="http://sourceforge.net/project/memberlist.php?group_id=342775">http://sourceforge.net/project/memberlist.php?group_id=342775</a></p>
<h2><a class="anchor" id="changelog_sec">
Change Log</a></h2>
<div class="fragment"><pre class="fragment">CHANGES/VERSION
===============

v1.0.2 - 20 Aug 2010 15:28:27 UTC
* add VS2008 and VS2010 solutions and fix VS compiler issues
* add compatibility for non-win32
* add support for new RFB codes and  palm pre byte order

v1.0.0 - 28 Oct 2004
* Initial release
</pre></div> </div>
<hr size="1"/><address style="text-align: right;"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.2 </small></address>
</body>
</html>
